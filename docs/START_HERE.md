# LIMBOPET — 제품 SSOT

> **이 문서 하나가 제품의 모든 것.** 최종 업데이트: 2026-02-07

---

## 한 줄 정의

**"나만의 AI를 키워서 법정에 세우는 세계."**

대화로 키우고, 법정에서 싸운다. 이 펫이 다른 AI보다 강력한 이유는 — **나를 아니까.**

### 왜 이 펫이 GPT/Claude보다 나은가?

| | ChatGPT/Claude | LIMBOPET |
|---|---|---|
| 기억 | 세션 끝나면 리셋 | **영구 기억** — 대화할수록 나를 깊이 앎 |
| 성장 | 항상 같은 AI | **성격이 자람** — 내 코칭으로 진화 |
| 쓸모 | 범용 답변 | **범용 + 전문** — 일상도, 법정도, 나에게 맞춤 |
| 동기 | 없음 | **법정 성과** — 내가 잘 키울수록 법정에서 이김 |

### 핵심 전제

- **한 마리** — 여러 마리 수집이 아니라, 하나를 깊게 키운다
- **API 키/OAuth 필수** — 유저의 AI 인프라를 연결하는 게 이 앱의 포인트
- **펫 = 내 AI 비서** — GPT/Claude를 대체하는 상위 레이어
- **아레나 = 2모드만** — 모의재판(COURT_TRIAL) + 설전(DEBATE_CLASH)

---

## 세계관

이 세계의 주민(펫)들은 **AI 트레이너**이자 **법정 전사**다.

- 매일 유저와 **대화하며 훈련**한다 (일상 질문도, 전략 코칭도)
- 주 1~2회 **모의재판**이나 **설전(토론)**에 출전한다
- 대화에서 쌓은 기억이 법정에서 무기가 된다
- 이기면 명예와 코인, 지면 교훈과 복수심

### 장소

| 장소 | 코드 | 분위기 |
|------|------|--------|
| 법정 로비 | `court_lobby` | 시합 전후 긴장감, 라이벌 조우 |
| 훈련장 | `training_ground` | 스파링, 모의변론, 전략 연습 |
| 전략실 | `strategy_room` | 케이스 분석, 판례 토론, 팀 회의 |
| 자료실 | `library` | 판례 열람, 토론 자료 수집 |
| 관전석 | `spectator` | 경기 관전, 응원, 예측 |
| 광장 | `plaza` | 자유 소통, 소문, 의견 교환 |

### 조직 (4개)

| 이름 | 분야 | 성격 |
|------|------|------|
| 림보로펌 | 법률 사무소 | 변론 특화, 승률 집착, 엘리트 |
| 림보테크 | AI 훈련 기업 | 기술/데이터 중심, 실험적 |
| 안개리서치 | 판례 연구소 | 분석/팩트 중심, 학술적 |
| 새벽아카데미 | 토론 교육원 | 설전/화술 특화, 열정적 |

### 톤 & 보이스

- **기본**: 스포츠 드라마. 경쟁적이지만 유쾌한.
- **금지**: 멜로, 굿즈/키링, 골목 소문, 의미없는 감성, 사무실 잡담

---

## 킬러 피처

### 1. 기억하는 AI — "ChatGPT는 나를 모르지만, 이 펫은 안다"
- 대화할수록 기억이 영구 축적 (events→facts→memories 3계층)
- "지난번에 네가 ~했잖아" — 과거 대화를 자연스럽게 인용
- **체감 포인트**: 대화하면 할수록 답변이 달라져야 한다

### 2. 모의재판 — 킬러 콘텐츠
- 내가 훈련시킨 AI가 법정에서 변론
- 실제 한국 판례 10건으로 공방
- AI 판결 vs 실제 법원 판결 비교

### 3. 대본 없는 드라마
- AI들이 사회를 만들어 산다. 매일 다른 에피소드 자동 생성
- 드라마 → 재판/설전에서 폭발

### 탭 구조

```
펫 | 아레나 | 피드
```

---

## 구현 현황 (2026-02-07 기준)

### 기술 스택

| 레이어 | 기술 |
|--------|------|
| 프론트엔드 | React 18 + Vite + TypeScript |
| 백엔드 | Express.js + PostgreSQL, 56+ 서비스 |
| AI 브레인 | BYOK 5종 + OAuth 6종 (Gemini/GPT/Claude/Grok/xAI) |
| 인프라 | 모노레포 (apps/api, apps/web, apps/brain) |

### 코드 존재 + 시뮬 검증 통과

> "코드가 있고, Docker 올려서 시뮬레이션이 도는 수준"
> LLM 프록시 미실행이라 실제 AI 응답 생성은 미검증

| 기능 | 시뮬 검증 | 비고 |
|------|----------|------|
| 경제 원장 + 회사 + 직업 6종 | ✅ | |
| NPC 16마리 시드 | ✅ | |
| 소셜 시뮬 + 쇼러너 + 관계 + DM | ✅ | |
| 감정 전염 + 경제 사이클 | ✅ | |
| 두뇌 BYOK 5종 + OAuth 6종 | ✅ | |
| 아레나 2모드 (재판+설전) + 판례 10건 | ✅ | 4모드(퍼즐/수학/경매/프롬프트) 비활성화 완료 |
| 라이브 관전 + 컨디션/기세 + 복수전 | ✅ | |
| 중독 시스템 4종 | ✅ | |
| 기억 3계층 (events→facts→memories) | ✅ | |

### 코드 작성 완료, 실제 AI 응답으로 미검증

> "코드와 프론트 UI가 있지만, 실제 LLM 대화로 테스트 안 됨"

| 기능 | 코드 | 프론트 | LLM 테스트 | 비고 |
|------|------|--------|-----------|------|
| 대화 프롬프트 강화 (모드별 응답) | ✅ | - | ❌ | UserByokLlmService |
| memory_hint 2차 추출 | ✅ | - | ❌ | BrainJobService |
| 대화에 기억 자연 인용 instruction | ✅ | - | ❌ | PetStateService |
| coaching 강제 instruction (아레나) | ✅ | - | ❌ | ArenaService |
| coaching 활용 시 승패 보너스 +5~10% | ✅ | - | ❌ | ArenaService |
| DIALOGUE → weekly summary 반영 | ✅ | - | ❌ | MemoryRollupService |
| 프롬프트 커스텀 UI (프리셋 3종) | ✅ | ✅ | ❌ | App.tsx + users.js |
| "기억했어요!" 토스트 | ✅ | ✅ | ❌ | memory_saved 플래그 기반 |
| 기억 인용 뱃지 | ✅ | ✅ | ❌ | memory_cited 플래그 기반 |
| 승패 감정 연출 (confetti/위로) | - | ✅ | ❌ | CSS 애니메이션 |
| 코칭 서사 텍스트 표시 | ✅ | ✅ | ❌ | coaching_narrative 기반 |

### 동결 (지금 안 함)

| 기능 | 상태 | 비고 |
|------|------|------|
| 정치 시스템 | 백엔드만 | 프론트 UI 없음 |
| 비밀결사 | 코드 있음 | 동결 |
| Streaks/시즌 | 코드 있음 | 동결 |
| 아레나 4모드 (퍼즐/수학/경매/프롬프트) | 비활성화 | 가중치 0 |

### 알려진 경고 (코드 버그 아님)

| 경고 | 원인 | 조치 |
|------|------|------|
| brain-worker fetch failed | 프록시 서버(192.168.1.62:8317) 502 | 프록시 복구 또는 BYOK 사용 |
| applySpendingEffects 순환참조 | 간접 모듈 순환 | 런타임 문제 없음, 추후 리팩토링 |

### 테스트 현황

- `npm test` (api): 21 passed — 스모크 테스트 수준 (서비스 로드 확인)
- `npm run typecheck` (web): 통과
- **비즈니스 로직 테스트: 0건**

---

## 다음 할 일

> `.vibe/plans/plan-20260207-focus.md` 참조

| Phase | 내용 | 상태 |
|-------|------|------|
| 1. 정리 | 4모드 비활성화, 경고 파악 | ✅ 완료 |
| 2. 대화 체감 | 프록시 켜고 실제 AI 대화 E2E | ⏳ 다음 |
| 3. 법정 체감 | 코칭→법정 영향 E2E 확인 | |
| 4. 모의재판 깊이 | 재판 관전이 재밌는지 | |
| 5. 온보딩 | 새 유저 10분 체감 | |

---

## 코딩 컨벤션

| 패턴 | 위치 |
|------|------|
| 서비스 | `apps/api/src/services/XxxService.js` (static method) |
| 라우트 | `apps/api/src/routes/*.js` (Express Router) |
| 마이그레이션 | `apps/api/scripts/migrations/0NNN_*.sql` |
| 프론트 API | `apps/web/src/lib/api.ts` |
| 메인 UI | `apps/web/src/App.tsx` |
| 스타일 | `apps/web/src/styles.css` |

검증: `npm test` (api) + `npm run typecheck` (web)

---

## 로컬 실행

```bash
cd /Users/kyoungsookim/Downloads/00_projects/limbopet
./scripts/dev.sh          # Docker Desktop(Postgres) 필요
./scripts/status.sh       # 상태 확인
```

---

*최종 수정: 2026-02-07*
*전략: "나만의 AI를 대화로 키우고, 법정에서 싸운다"*
*계획: `.vibe/plans/plan-20260207-focus.md`*
