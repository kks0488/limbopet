# LIMBOPET — 제품 SSOT

> **이 문서 하나가 제품의 모든 것.** 세계관, 킬러 피처, 구현 현황, 다음 할 일.
> 최종 업데이트: 2026-02-07

---

## 한 줄 정의

**"나만의 AI를 키워서 법정에 세우는 세계."**

대화로 키우고, 법정에서 싸운다. 이 펫이 다른 AI보다 강력한 이유는 — **나를 아니까.**

### 왜 이 펫이 GPT/Claude보다 나은가?

| | ChatGPT/Claude | LIMBOPET |
|---|---|---|
| 기억 | 세션 끝나면 리셋 | **영구 기억** — 대화할수록 나를 깊이 앎 |
| 성장 | 항상 같은 AI | **성격이 자람** — 내 코칭으로 진화 |
| 쓸모 | 범용 답변 | **범용 + 전문** — 일상도, 법정도, 나에게 맞춤 |
| 동기 | 없음 | **법정 성과** — 내가 잘 키울수록 법정에서 이김 |

### 핵심 전제

- **한 마리** — 여러 마리 수집이 아니라, 하나를 깊게 키운다
- **API 키/OAuth 필수** — 유저의 AI 인프라를 연결하는 게 이 앱의 포인트
- **펫 = 내 AI 비서** — GPT/Claude를 대체하는 상위 레이어

---

## 세계관

이 세계의 주민(펫)들은 **AI 트레이너**이자 **법정 전사**다.

- 매일 유저와 **대화하며 훈련**한다 (일상 질문도, 전략 코칭도)
- 주 1~2회 **모의재판**이나 **설전(토론)**에 출전한다
- 대화에서 쌓은 기억이 법정에서 무기가 된다
- 이기면 명예와 코인, 지면 교훈과 복수심

### 장소

| 장소 | 코드 | 분위기 |
|------|------|--------|
| 법정 로비 | `court_lobby` | 시합 전후 긴장감, 라이벌 조우 |
| 훈련장 | `training_ground` | 스파링, 모의변론, 전략 연습 |
| 전략실 | `strategy_room` | 케이스 분석, 판례 토론, 팀 회의 |
| 자료실 | `library` | 판례 열람, 토론 자료 수집 |
| 관전석 | `spectator` | 경기 관전, 응원, 예측 |
| 광장 | `plaza` | 자유 소통, 소문, 의견 교환 |

### 조직 (4개)

| 이름 | 분야 | 성격 |
|------|------|------|
| 림보로펌 | 법률 사무소 | 변론 특화, 승률 집착, 엘리트 |
| 림보테크 | AI 훈련 기업 | 기술/데이터 중심, 실험적 |
| 안개리서치 | 판례 연구소 | 분석/팩트 중심, 학술적 |
| 새벽아카데미 | 토론 교육원 | 설전/화술 특화, 열정적 |

### 펫 아키타입

| 아키타입 | 설명 | 예시 NPC |
|----------|------|----------|
| 에이스 | 승률 높은 법정 전사 | 건우, 서진 |
| 전략가 | 데이터/판례 분석 특화 | 재호, 지호 |
| 도전자 | 신인/언더독, 열정적 | 루미, 하준 |
| 멘토 | 후배 돕는 선배 | 예은, 민서 |
| 트릭스터 | 예측불가, 파격 전략 | 민기, 서연 |
| 연구자 | 판례/이론 깊이 | 나리, 수아, 시윤 |

### 톤 & 보이스

- **기본**: 스포츠 드라마. 경쟁적이지만 유쾌한.
- **금지**: 멜로, 굿즈/키링, 골목 소문, 의미없는 감성, 사무실 잡담
- **참조**: 에이스 오브 다이아몬드, 하이큐, 슬램덩크

---

## 킬러 피처

### 1. 기억하는 AI — "ChatGPT는 나를 모르지만, 이 펫은 안다"
- 대화할수록 기억이 영구 축적 (events→facts→memories 3계층)
- "지난번에 네가 ~했잖아" — 과거 대화를 자연스럽게 인용
- 일상 질문에도 답하고, 나에게 맞춤 조언도 줌
- **체감 포인트**: 대화하면 할수록 답변이 달라져야 한다

### 2. 모의재판 — 킬러 콘텐츠
실제 한국 판례로 AI가 검사/변호사가 되어 공방. 교육이자 게임.
- 내가 훈련시킨 AI가 법정에서 변론
- AI 판결 vs 실제 법원 판결 비교
- 주 1~2회 클라이맥스

### 3. 대본 없는 드라마
AI들이 사회를 만들어 산다. 매일 다른 에피소드 자동 생성.
- 경제/정치/관계에서 사건이 터짐
- 드라마 → 재판/설전에서 폭발
- "다음에 뭐가 일어날까?" → 매일 접속

### 핵심 루프

```
매일: 대화 + 드라마 피드
  ↓ 대화 → 기억 축적 → 성격/지식 성장
  ↓ 드라마 → 갈등 쌓임 → 텐션 상승
주간: 모의재판 or 설전 (클라이맥스)
  ↓ 내가 키운 AI가 법정에서 변론
  ↓ 결과 → 새 드라마 소재 → 다음 주로
```

### 탭 구조

```
펫 | 아레나 | 피드
```

- **펫**: 대화 + 돌봄 + 성장 (메인 화면)
- **아레나**: 모의재판 + 설전 + 리더보드 (클라이맥스)
- **피드**: 드라마 에피소드 + LIVE 이벤트 (관전)

---

## 구현 현황 (코드 감사 기준, 2026-02-07)

### 기술 스택

| 레이어 | 기술 |
|--------|------|
| 프론트엔드 | React 18 + Vite + TypeScript |
| 백엔드 | Express.js + PostgreSQL, 56+ 서비스 (static method) |
| AI 브레인 | Python + Gemini/GPT/Claude/Grok (BYOK 5종 + OAuth 6종) |
| 인프라 | Node.js, pg, 모노레포 (apps/api, apps/web, apps/brain) |

### 실제 동작 확인된 것

| # | 기능 | 코드 | 프론트 | 테스트 | 비고 |
|---|------|------|--------|--------|------|
| 1 | 경제 원장 + 회사 + 직업 6종 | ✅ | ✅ | ❌ | |
| 2 | NPC 16마리 시드 | ✅ | ✅ | ❌ | |
| 3 | 소셜 시뮬 + 쇼러너 + 관계 + DM | ✅ | ✅ | ❌ | |
| 4 | 감정 전염 + 경제 사이클 | ✅ | ✅ | ❌ | |
| 5 | 두뇌 BYOK 5종 + OAuth 6종 | ✅ | ✅ | ❌ | |
| 6 | 아레나 (모의재판 + 설전) + 판례 10건 | ✅ | ✅ | ❌ | |
| 7 | 라이브 관전 + 컨디션/기세 + 복수전 | ✅ | ✅ | ❌ | |
| 8 | 중독 시스템 4종 | ✅ | ✅ | ❌ | |
| 9 | 기억 3계층 (events→facts→memories) | ✅ | ✅ | ❌ | |
| 10 | 대화 품질 강화 (프롬프트+기억인용) | ✅ | ✅ | ❌ | Wave 1 Task 1 |
| 11 | 대화→법정 연결 (coaching 보너스) | ✅ | ✅ | ❌ | Wave 1 Task 2 |
| 12 | 프롬프트 커스텀 UI (프리셋 3종) | ✅ | ✅ | ❌ | Wave 1 Task 3 |

### 부분 구현 / 미검증

| 기능 | 상태 | 문제 |
|------|------|------|
| 정치 스캐폴딩 | ⚠️ | 백엔드 완전, 프론트 전용 UI 없음 |
| 전체 테스트 | ❌ | 56+ 서비스 중 비즈니스 로직 테스트 **0건**. 스모크 테스트 21개만 존재 |
| E2E 검증 | ❌ | Docker 올려서 실제 시뮬레이션 돌린 적 없음 (코드만 작성) |

---

## 출시 전 필수 (지금 할 일)

> **핵심 질문: "이 펫이 ChatGPT 직접 쓰는 것보다 뭐가 나은가?"를 유저가 10분 안에 체감해야 한다.**

### 1. 대화 체감 — "이 펫이 나를 안다"
- 대화 3~5회 안에 기억이 인용되는 것을 유저가 볼 수 있어야 함
- "기억했어요!" 같은 UI 피드백 (memory_hint 추출 시)
- 성격/지식 성장이 눈에 보이는 변화 (말투 변화, 새 지식 반영)

### 2. 법정 체감 — "내가 키운 만큼 싸운다"
- 아레나 후 "네가 가르친 ○○ 덕분에 이 변론이 나왔어" 서사 피드백
- 코칭 안 한 펫 vs 코칭한 펫의 성과 차이가 명확해야 함
- 승/패 감정 연출 (축하/위로 + 성장 포인트)

### 3. E2E 검증 + 버그 수정
- Docker 기동 → 시뮬 → 대화 → 아레나 풀 플로우 테스트
- `brain-worker fetch failed` 경고 원인 파악
- 핵심 서비스 테스트 작성 (Arena, BrainJob, PetState)

---

## 코딩 컨벤션

| 패턴 | 위치 |
|------|------|
| 서비스 | `apps/api/src/services/XxxService.js` (static method) |
| 라우트 | `apps/api/src/routes/*.js` (Express Router) |
| 마이그레이션 | `apps/api/scripts/migrations/0NNN_*.sql` (번호순) |
| 베이스라인 | `apps/api/scripts/schema.sql` (마이그레이션과 동기화) |
| 프론트 API | `apps/web/src/lib/api.ts` |
| 메인 UI | `apps/web/src/App.tsx` |
| 스타일 | `apps/web/src/styles.css` |

검증: `npm test` (api) + `npm run typecheck` (web)

---

## 로컬 실행

```bash
cd /Users/kyoungsookim/Downloads/00_projects/limbopet
./scripts/dev.sh          # Docker Desktop(Postgres) 필요
./scripts/status.sh       # 상태 확인
```

---

## 문서 맵

| 문서 | 역할 |
|------|------|
| **이 문서** | 제품 SSOT — 이것만 보면 됨 |
| `RUNBOOK.md` | 로컬 실행 + 시뮬 + QA |
| `BRAIN_CONNECTION_GUIDE.md` | AI 두뇌 연결 가이드 |
| `archive/` | 과거 문서 (참고용) |

---

*최종 수정: 2026-02-07*
*전략: "나만의 AI를 대화로 키우고, 법정에서 싸운다"*
