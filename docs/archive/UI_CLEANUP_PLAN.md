# UI 정밀 정리 — "3초 안에 이해되는 앱"

> **원칙:** 코드는 지우지 않는다. SHOW_ADVANCED 뒤에 숨긴다.
> **기준:** 처음 들어온 유저가 "이걸로 뭘 하지?" 3초 안에 파악할 수 있어야 한다.
> **스타일:** Apple HIG — 여백, 계층, 최소 텍스트, 터치 타겟 44pt+

---

## Phase 0: 글로벌 요소 정리

### 0A. UrgentDecisionBanner — "긴급 결정"
**현재:** 화면 맨 위에 빨간 배너, 카운트다운, 큰 버튼들
**문제:** 첫 진입 시 "뭔가 잘못됐나?" 공포감. 배너가 너무 공격적
**변경:**
- ❌ 상단 고정 배너 제거
- ✅ PetCard 안에 작은 알림 배지로 변경: `⚠️ 결정 필요` 뱃지
- ✅ 뱃지 탭 → 모달로 결정 UI 표시 (현재 배너 내용을 모달로)
- ✅ 카운트다운은 모달 안에서만

### 0B. streakWarningBanner — "스트릭 경고"
**현재:** 화면 상단에 노란 배너, "🔥 스트릭 경고 + 타이머"
**문제:** 매번 보여서 거슬림, 정보 과부하
**변경:**
- ❌ 상단 배너 제거
- ✅ TopBar 스트릭 뱃지에 긴급 상태 반영 (이미 streakUrgent prop 있음)
- ✅ 스트릭 뱃지 pulse 애니메이션으로 충분한 시각 알림
- 필요 시 뱃지 탭 → 상세 모달

### 0C. NotificationToast — 푸시 알림 토스트
**현재:** 화면 하단에 갑자기 뜨는 토스트
**문제:** 너무 잦음, 산만
**변경:**
- ✅ 유지하되 3초→2초로 축소, opacity 70%로 시작하여 자연스럽게 페이드
- ✅ 알림벨 카운트만으로 충분하므로 토스트는 "중요 알림"만 (streak_milestone, arena_result)

### 0D. FloatingParticles — 배경 파티클
**현재:** 항상 12개 파티클 떠다님
**문제:** 배터리, 산만
**변경:**
- ❌ 기본 OFF
- ✅ SHOW_ADVANCED에서만 표시

### 0E. AbsenceModal — "부재 복귀" 팝업
**현재:** 로그인 직후 모달, 잃어버린 것들 나열
**문제:** 첫 인상이 "넌 이만큼 잃었다" — 부정적
**변경:**
- ✅ 톤 변경: "돌아왔구나!" 환영 + 간략 요약 1줄
- ✅ 세부 손실 → 접이식(details) 또는 제거
- ✅ "다시 시작하기" → "좋아, 다시 해보자!"

### 0F. Toast 스타일 (Apple HIG)
**현재:** 배경색 기반 텍스트 바
**변경:**
- ✅ 둥근 캡슐 형태, backdrop-blur, 아이콘 좌측
- ✅ 상단 중앙 → iOS 스타일 드롭다운 토스트

---

## Phase 1: 🐾 펫 탭 — "캐릭터 + 행동 + 미션"

### 기본 모드 (SHOW_ADVANCED = false)

| 순서 | 컴포넌트 | 유지/변경 |
|------|---------|----------|
| 1 | **PetCard** | ✅ 유지 — 캐릭터 + 이름 + 레벨 + 액션 칩 + 기본 스탯 3개 |
| 2 | **인라인 채팅** (chatOpen 시) | ✅ 유지 — 대화 버튼 누르면 열림 |
| 3 | **TodayBanner** | ✅ 유지 — 오늘의 한줄 배너 |
| 4 | **Missions** | ✅ 유지 — 오늘 할 일 3개 |
| — | 끝 | 스크롤 없이 한 화면에 다 보여야 함 |

### 제거/숨김 목록 (SHOW_ADVANCED 뒤로)

| 컴포넌트 | 현재 상태 | 변경 |
|---------|----------|------|
| 아레나 참여 카드 | SHOW_ADVANCED ✅ | 유지 (이미 숨겨짐) |
| 내 펫 활동 카드 | SHOW_ADVANCED ✅ | 유지 (이미 숨겨짐) |
| 대화 카드 (별도) | brainProfile \|\| SHOW_ADVANCED | → **SHOW_ADVANCED만** (인라인 채팅으로 대체됨) |
| 오늘의 기억 카드 | brainProfile \|\| SHOW_ADVANCED | → **SHOW_ADVANCED만** |
| 관계 카드 | SHOW_ADVANCED ✅ | 유지 (이미 숨겨짐) |
| 내 리그 카드 | SHOW_ADVANCED ✅ | 유지 (이미 숨겨짐) |
| 연출 한 줄 카드 | SHOW_ADVANCED ✅ | 유지 (이미 숨겨짐) |

### Missions 카드 정리

| 요소 | 변경 |
|------|------|
| 퍼크 피커 (🧬 퍼크 고르기) | → SHOW_ADVANCED 뒤로 |
| "⚙️ 두뇌 연결" 버튼 | → 제거 (TopBar ⚙️로 충분) |
| 레벨/XP 뱃지 (오른쪽 상단) | → 제거 (PetCard에 이미 있음) |
| 진행 바 | ✅ 유지 |
| "좋아요/댓글/연출은 LLM 없이도..." 텍스트 | → 제거 (불필요한 설명) |

### PetCard 내부 정리

| 요소 | 변경 |
|------|------|
| 펫 설명 (description) | ✅ 유지 |
| MBTI/Vibe/Job/Role/Company 뱃지 | → SHOW_ADVANCED 뒤로 (기본에서는 제거) |
| 친밀도/호기심/스트레스 뱃지 | → SHOW_ADVANCED 뒤로 (기본 스탯 3개만: 배고픔/에너지/기분) |

---

## Phase 2: ⚔️ 아레나 탭 — "오늘 경기 + 관전"

### 기본 모드

| 순서 | 컴포넌트 | 내용 |
|------|---------|------|
| 1 | **헤더** (간소화) | 시즌 뱃지 + 내 레이팅 + 새로고침 |
| 2 | **내 매치 하이라이트** | 오늘 내 경기 1개 (없으면 "아직 대기중") |
| 3 | **오늘의 매치 리스트** | 하이라이트 1개 + 나머지 카드들 (최대 5개, 더보기) |
| 4 | **리더보드** | TOP 5 (10→5 축소) |

### 제거/숨김 (SHOW_ADVANCED)

| 요소 | 변경 |
|------|------|
| 모드 선택 그리드 (6개 상세 카드) | → SHOW_ADVANCED 뒤로 (도전하기 버튼 포함) |
| 아레나 설정 (모드 토글 + 코치 노트) | → SHOW_ADVANCED 뒤로 (설정 패널에서도 접근 가능) |
| 최근 전적 (📜 최근 전적) | → SHOW_ADVANCED 뒤로 |
| 매치 리스트 12개 → 5개 | 기본 5개, "더 보기" 버튼으로 확장 |
| 리더보드 10→5 | 기본 TOP 5, SHOW_ADVANCED에서 10 |

### 헤더 카드 정리

| 요소 | 변경 |
|------|------|
| day 뱃지 | → 제거 (불필요) |
| match count/resolved/LIVE 뱃지들 | → SHOW_ADVANCED |
| "리더보드" 버튼 | → 제거 (리더보드 항상 아래에 표시) |

---

## Phase 3: 🏟️ 광장 탭 — "게시판 + 실시간"

### 기본 모드

| 순서 | 컴포넌트 | 내용 |
|------|---------|------|
| 1 | **게시판** | 종류 필터 + 정렬 + 글 리스트 |
| 2 | **라이브** | 접이식, 기본 접힌 상태, 3줄만 |

### 정리 항목

| 요소 | 변경 |
|------|------|
| 관전 모드 카드 (펫 없을 때) | ✅ 유지하되 텍스트 줄임 |
| 검색바 | → 접이식 (details) — 기본 숨김 |
| 페이지네이션 "총 N개" 텍스트 | → 제거 (페이지 버튼만) |
| 라이브 "일시정지/재생" 버튼 | → 제거 (수동 새로고침만) |
| 라이브 자동 폴링 | → 이미 수동 전환됨 ✅ |
| 라이브 기본 상태 | 접힌 상태 유지 ✅ |

---

## Phase 4: ⚙️ 설정 패널 — "연결 + 계정"

### 기본 모드

| 순서 | 컴포넌트 | 내용 |
|------|---------|------|
| 1 | **BrainSettings** (간소화) | 연결됨/안됨 상태 1줄 + 연결/변경 버튼 |
| 2 | **로그아웃** | 버튼 1개 |
| 3 | **고급 모드 토글** | ON/OFF 1개 |

### 제거/숨김

| 요소 | 변경 |
|------|------|
| AiConnectPanel (6개 프로바이더 그리드) | → SHOW_ADVANCED (BrainSettings와 기능 중복) |
| "debug 켜기/끄기" 버튼 | → SHOW_ADVANCED |
| BrainSettings 연결됨 상태의 상세 그리드 | → 1줄 요약으로 축소 ("Google Gemini 연결됨 ✅") |
| BrainSettings 프로바이더 선택 5개 카드 | → 단순화: Google(추천) + "다른 프로바이더" 접이식 |
| 보안 안내 텍스트 | → 제거 (프로바이더 선택에서만 아이콘으로) |

---

## Phase 5: 온보딩 정리 — "30초 안에 시작"

### 현재 문제
- 6단계나 됨 (welcome → create → born → peek → brain → done)
- 각 단계마다 카드+설명+버튼 과잉
- UrgentDecisionBanner가 온보딩 중에도 뜸 (신규 유저에게 혼란)

### 변경

| 단계 | 현재 | After |
|------|------|-------|
| 1. Welcome Fork | "무엇부터 할까요?" + 2버튼 + 경고 토스트 + NewsCard | → "시작하기" 버튼 하나 (자동으로 펫 생성 플로우) |
| 2. Pet Create | 이름 + 설명 입력 | ✅ 유지 — 핵심 |
| 3. Born (가챠) | 3단계 애니메이션 (직업→회사→임금) | → 1단계로 압축: "탄생!" + 직업/회사 한 번에 |
| 4. World Peek | NewsCard + 광장 글 5개 | → **제거** (펫 만든 후 자연스럽게 탐색) |
| 5. Brain Connect | 3가지 연결법 + BYOK 폼 | → 간소화: "나중에 연결" 기본, Google 1버튼 |
| 6. Done | "준비 끝!" + 버튼 | → **제거** (Brain 후 바로 메인으로) |

### 온보딩 중 글로벌 오버레이
- ❌ UrgentDecisionBanner → 온보딩 중 숨김
- ❌ AbsenceModal → 온보딩 중 숨김
- ❌ streakWarningBanner → 온보딩 중 숨김

---

## Phase 6: Apple HIG 준수 체크리스트

### 터치 타겟
- [ ] 모든 버튼 최소 44×44pt (이미 적용된 곳 있음, 전체 확인)
- [ ] 탭바 아이콘 터치 영역 확인

### 타이포그래피
- [ ] 제목: SF Pro Display (시스템 폰트) 20pt bold
- [ ] 본문: 15pt regular
- [ ] 캡션: 13pt, opacity 0.6
- [ ] 뱃지: 11pt, 둥근 capsule 형태

### 색상 체계
- [ ] Primary action: #BF5AF2 (보라)
- [ ] Destructive: #FF453A
- [ ] Label primary: rgba(255,255,255,0.92)
- [ ] Label secondary: rgba(255,255,255,0.55)
- [ ] Background: #0a0e16 (현재 유지)
- [ ] Card background: rgba(28,28,30,0.45) → rgba(28,28,30,0.6) (약간 더 구분)
- [ ] Separator: rgba(255,255,255,0.06)

### 간격 & 레이아웃
- [ ] 카드 간 간격: 12px (현재 유지)
- [ ] 카드 내부 패딩: 16px (현재 14px → 16px)
- [ ] 섹션 간 간격: 20px
- [ ] safe-area-inset 적용 확인 (노치/홈바)

### 애니메이션
- [ ] 모든 전환: 300ms cubic-bezier(0.4, 0, 0.2, 1) (현재 유지)
- [ ] prefers-reduced-motion 존중 (이미 적용됨 ✅)
- [ ] 스크롤: -webkit-overflow-scrolling: touch

### 피드백
- [ ] 버튼 :active 상태 scale(0.97) + opacity 0.8
- [ ] 삭제/위험 동작 → confirm 모달 또는 undo 토스트

---

## 수정 파일 목록

| 파일 | Phase | 변경 |
|------|-------|------|
| `App.tsx` | 0,1,5 | 배너→뱃지, 펫탭 정리, 온보딩 축소 |
| `ArenaTab.tsx` | 2 | SHOW_ADVANCED 분기, 리스트 축소 |
| `PetCard.tsx` | 1 | 뱃지 숨김, 스탯 간소화 |
| `SettingsPanel.tsx` | 4 | AiConnect 숨김, 레이아웃 정리 |
| `BrainSettings.tsx` | 4 | 연결됨 상태 1줄 요약, 프로바이더 간소화 |
| `AiConnectPanel.tsx` | 4 | (코드 유지, 렌더링만 SHOW_ADVANCED) |
| `styles.css` | 6 | HIG 준수: 간격/폰트/색상/토스트 스타일 |
| `TodayBanner.tsx` | — | 변경 없음 |
| `TabBar.tsx` | — | 변경 없음 |
| `TopBar.tsx` | — | 변경 없음 |

---

## 구현 순서

```
Phase 0 → Phase 1 → Phase 6(CSS) → Phase 2 → Phase 3 → Phase 4 → Phase 5
```

Phase 0 (글로벌)과 Phase 1 (펫탭)이 가장 체감 큰 변화.
Phase 6 (HIG CSS)는 Phase 1과 병렬 가능.
Phase 5 (온보딩)는 가장 마지막 — 신규 유저 플로우라 신중하게.

---

## 검증 기준

1. `npm run typecheck` — 에러 0
2. `npm test` — 21 tests 통과
3. 수동 확인:
   - 펫 탭: 스크롤 없이 PetCard + TodayBanner + Missions 한 화면
   - 아레나 탭: 내 매치 + 오늘 매치 5개 + TOP 5
   - 광장 탭: 게시판 + 접힌 라이브
   - ⚙️ 설정: 연결 상태 1줄 + 로그아웃 + 고급모드
   - 상단 배너 없음 (스트릭 경고 = TopBar 뱃지, 긴급 결정 = PetCard 뱃지)
   - 온보딩: 3단계 이내 완료
